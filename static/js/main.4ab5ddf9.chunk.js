(this["webpackJsonpfloor-plan"]=this["webpackJsonpfloor-plan"]||[]).push([[0],{101:function(e,t,n){e.exports={root:"Item_root__8ZGj6"}},120:function(e,t,n){e.exports={root:"Home_root__3GMAO"}},127:function(e,t,n){e.exports={root:"FloorPlan_root__3Mxaj"}},128:function(e,t,n){e.exports=n.p+"static/media/blueprint.173beae2.png"},132:function(e,t,n){e.exports={root:"Workspace_root__2tRmB"}},133:function(e,t,n){},138:function(e,t,n){e.exports=n(216)},145:function(e,t,n){},216:function(e,t,n){"use strict";n.r(t);var r,a,c=n(0),o=n.n(c),i=n(5),l=n.n(i),u=(n(143),n(144),n(145),n(43)),s=n(38),f=n(119),m=n(21),d=n(51),p=n(70),b=n.n(p),O=n(10),h=n(224),j=n(221),g=n(15),v=(Object(h.a)("app/SET_DATA",(function(e){return{data:e}})),Object(h.a)("app/SET_RANGE",(function(e,t){return{from:e,to:t}})),Object(j.a)((r={},Object(O.a)(r,"app/SET_DATA",(function(e,t){var n=t.payload;return Object(g.a)(e,(function(e){var t=n.data;e.data=t}))})),Object(O.a)(r,"app/SET_RANGE",(function(e,t){var n=t.payload;return Object(g.a)(e,(function(e){var t=n,r=t.from,a=t.to;e.range={from:r,to:a}}))})),r),{data:[],collections:[],collectionDict:{},keywords:[],range:{from:"",to:""}})),y=n(37),w=n(219);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D,P="workspace/ADD",S=Object(h.a)(P,(function(e){return e})),C=Object(h.a)("workspace/UPDATE",(function(e){return e})),_=Object(h.a)("workspace/REMOVE",(function(e){return{id:e}})),M=Object(j.a)((a={},Object(O.a)(a,P,(function(e,t){var n=t.payload;return Object(g.a)(e,(function(e){var t=Math.random().toString(36).substr(-6);e.workspaces=[].concat(Object(y.a)(e.workspaces),[k({name:Object(w.a)(new Date,"yyyy.MM.dd. HH:mm"),data:N},n,{id:t,scale:50,createTime:(new Date).toISOString()})]);e.focus=t}))})),Object(O.a)(a,"workspace/UPDATE",(function(e,t){var n=t.payload;return Object(g.a)(e,(function(e){var t=n.id,r=e.workspaces.findIndex((function(e){return e.id===t}));-1!==r&&(e.workspaces[r]=k({},e.workspaces[r],{},n,{updateTime:(new Date).toISOString()}))}))})),Object(O.a)(a,"workspace/REMOVE",(function(e,t){var n=t.payload;return Object(g.a)(e,(function(e){var t=n.id;e.workspaces=e.workspaces.filter((function(e){return e.id!==t})),e.focus===t&&(e.focus=null)}))})),a),{workspaces:[],focus:null,collections:[],collectionDict:{},keywords:[],range:{from:"",to:""}}),N={items:[{top:1170.6007439683185,left:1467.4282986065064,width:210,height:120,rotate:90,id:"69mvnt",name:"\uce68\ub3001"},{top:1169.5481123893712,left:1347.268115540145,width:210,height:120,rotate:90,id:"dwltnj",name:"\uce68\ub3002"},{top:1305.9096684534443,left:1109.1445457460945,width:120,height:60,rotate:270,id:"d6jum6",name:"\ucc45\uc0c1"},{top:1257.6349206349207,left:553.888888888889,width:210,height:160,rotate:0,id:"gfdi6o",name:"\ud038\uce68\ub300"},{top:1129.1461988304095,left:1251.7777777777778,width:95,height:52,rotate:0,id:"50mids",name:"\uc11c\ub78d\uc7a5"},{top:1367.2793355834972,left:321.15743728595635,width:154,height:42,rotate:90,id:"2soy7j",name:"\ud589\uac70"},{top:345.1988304093569,left:1149.4093567251462,width:200,height:91,rotate:0,id:"1vufrc",name:"\uc18c\ud30c"},{top:587.5672514619885,left:1078.6198830409355,width:180,height:47,rotate:0,id:"vumct3",name:"TV\ub2e4\uc774"},{top:1011.5146198830411,left:1143.3567251461989,width:290,height:92,rotate:0,id:"776dxr",name:"\uc18c\ud30c"},{top:669.6725146198833,left:1109.409356725146,width:270,height:47,rotate:0,id:"7tigqj",name:"\ucc45\uc7a5?"},{top:663.3567251461991,left:1475.4619883040934,width:133,height:41,rotate:0,id:"sm0qgr",name:"\ud53c\uc544\ub178"},{top:1260.4723082215346,left:960.503267973856,width:85,height:180,rotate:0,id:"v6dhzi",name:"\uc2dd\ud0c1"},{top:586.5146198830411,left:1261.7777777777776,width:96,height:47,rotate:0,id:"pb8bxl",name:"CD"},{top:1519.6879944960444,left:790.3071895424837,width:92,height:92,rotate:0,id:"0886hr",name:"\ub0c9\uc7a5\uace0"},{top:1627.923288613692,left:888.7385620915034,width:71,height:67,rotate:0,id:"acrk6a",name:"\uae40\ub0c9"},{top:1518.5115239078093,left:1126.3856209150326,width:70,height:70,rotate:0,id:"ghfizn",name:"\uc138\ud0c1\uae30"},{top:1264.5520628562244,left:376.38471001322904,width:45,height:45,rotate:0,id:"t7af7e",name:"\uc637\uc7a5"},{top:1167.50660831077,left:379.3392554677745,width:53,height:95,rotate:0,id:"il6xzm",name:"\uc637\uc7a5"}],scale:53,focus:"1vufrc",collections:[],collectionDict:{},keywords:[],range:{from:"",to:""}};function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Object(h.a)("item/ADD",(function(e){return e})),Object(h.a)("item/UPDATE",(function(e){return e})),Object(h.a)("item/FOCUS",(function(e){return{id:e}})),Object(h.a)("item/REMOVE",(function(e){return{id:e}}));var x=Object(j.a)((D={},Object(O.a)(D,"item/ADD",(function(e,t){var n=t.payload;return Object(g.a)(e,(function(e){var t=Math.random().toString(36).substr(-6);e.items=[].concat(Object(y.a)(e.items),[A({top:~~(500*Math.random()),left:~~(500*Math.random()),width:200,height:100,rotate:0},n,{id:t})]);e.focus=t}))})),Object(O.a)(D,"item/FOCUS",(function(e,t){var n=t.payload;return Object(g.a)(e,(function(e){var t=n.id;e.focus===t?e.focus=null:e.items.find((function(e){return e.id===t}))&&(e.focus=t)}))})),Object(O.a)(D,"item/UPDATE",(function(e,t){var n=t.payload;return Object(g.a)(e,(function(e){var t=n.id,r=e.items.findIndex((function(e){return e.id===t}));-1!==r&&(e.items[r]=A({},e.items[r],{},n))}))})),Object(O.a)(D,"item/REMOVE",(function(e,t){var n=t.payload;return Object(g.a)(e,(function(e){var t=n.id;e.items=e.items.filter((function(e){return e.id!==t})),e.focus===t&&(e.focus=null)}))})),D),{items:[],focus:null,scale:50,collections:[],collectionDict:{},keywords:[],range:{from:"",to:""}}),R=Object(m.b)({app:Object(d.a)({key:"app",storage:b.a},v),item:Object(d.a)({key:"item",storage:b.a},x),workspace:Object(d.a)({key:"workspace",storage:b.a},M)});console.log(R);var V=R;var U=n(39),X=n(218),F=n(103),I=n(2),Y=n.n(I),J=n(120),z=n.n(J);var G=function(e){var t=Object(s.b)(),n=Object(s.c)((function(e){return Object(X.a)(e,["workspace","workspaces"])})),r=Object(c.useCallback)((function(){t(S({}))}),[t]);return c.createElement("div",{className:Y()("container",z.a.root)},c.createElement("div",{className:"row"},c.createElement("div",{className:"col"},c.createElement("div",{style:{float:"right"}},c.createElement(F.a,{onClick:r},"New Page")),c.createElement("h3",null,"Floor Plan"))),c.createElement("div",{className:"row"},c.createElement("div",{className:"col"},c.createElement("hr",null),c.createElement("ul",null,n.map((function(e,t){return c.createElement("li",{key:t},c.createElement(u.b,{to:"/workspaces/".concat(e.id)},e.name||e.id))}))))))},H=n(222),B=n(69),L=n(220),W=n(124);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $={items:[],scale:50,focus:null,collections:[],collectionDict:{},keywords:[],range:{from:"",to:""}},K=Object(h.a)("item/ADD",(function(e){return e})),Q=Object(h.a)("item/UPDATE",(function(e){return e})),ee=Object(h.a)("item/FOCUS",(function(e){return{id:e}})),te=Object(h.a)("item/REMOVE",(function(e){return{id:e}})),ne=Object(h.a)("item/SET_SCALE",(function(e){return{scale:e}})),re=function(e,t){var n=t.type,r=t.payload;switch(n){case"item/ADD":var a=Math.random().toString(36).substr(-6);return e.items=[].concat(Object(y.a)(e.items),[Z({top:~~(500*Math.random()),left:~~(500*Math.random()),width:100,height:100,rotate:0},r,{id:a})]),void(e.focus=a);case"item/FOCUS":var c=r.id;return void(e.focus===c?e.focus=null:e.items.find((function(e){return e.id===c}))&&(e.focus=c));case"item/UPDATE":var o=r.id,i=e.items.findIndex((function(e){return e.id===o}));return void(-1!==i&&(e.items[i]=Z({},e.items[i],{},r)));case"item/REMOVE":var l=r.id;return e.items=e.items.filter((function(e){return e.id!==l})),void(e.focus===l&&(e.focus=null));case"item/SET_SCALE":var u=r.scale;return void(e.scale=u)}};var ae=function(e){return Object(W.a)(re,e||$)},ce=n(134),oe=n(101),ie=n.n(oe);var le=function(e){var t=e.name,n=e.id,r=e.scale,a=e.top,o=e.left,i=e.width,l=e.height,u=e.rotate,s=e.state,f=e.dispatch,m=Object(c.useMemo)((function(){return Object(X.a)(s,["focus"])}),[s]),d=Object(c.useRef)(),p=Object(c.useCallback)((function(){d.current||f(ee(n))}),[f,n]),b=Object(c.useMemo)((function(){return{top:a*r,left:o*r,width:i*r,height:l*r,fontSize:"".concat(2.5*r,"rem"),transform:"rotate(".concat(u,"deg)")}}),[a,o,i,l,u,r]),O=Object(c.useRef)(),h=Object(c.useState)(),j=Object(B.a)(h,2),g=j[0],v=j[1],y=Object(c.useRef)(),w=Object(c.useCallback)((function(e){var t=e.clientX,n=e.clientY;y.current={clientX:t,clientY:n}}),[]),E=Object(c.useCallback)((function(e){console.log(e),console.log(y.current);var t=e.clientX,c=e.clientY,i=(t-y.current.clientX)/r,l=(c-y.current.clientY)/r;d.current=!0,setTimeout((function(){d.current=!1,f(Q({id:n,top:a+l,left:o+i}))}),0)}),[n,a,o,r]),k=Object(c.useCallback)((function(e){var t=e.clientX,n=e.clientY;y.current={clientX:t,clientY:n}}),[]),D=Object(c.useCallback)((function(e){var t=e.target.style.transform.match(/rotate\(([\-0-9]+)deg\)/);t&&t[1]&&setTimeout((function(){f(Q({id:n,rotate:u+~~t[1]}))}),0)}),[n,u]),P="".concat(n,"_").concat(a,"_").concat(o,"_").concat(i,"_").concat(l,"_").concat(u,"_").concat(r);return Object(c.useEffect)((function(){v(O.current)}),[P]),c.createElement(c.Fragment,{key:P},c.createElement("div",{ref:O,className:Y()(ie.a.root,m===n&&ie.a.focus),onClick:p,style:b},c.createElement("span",null," ",t||n)),g&&m===n&&c.createElement(ce.a,{target:g,container:null,origin:!1,draggable:!0,onDrag:function(e){var t=e.target,n=(e.beforeDelta,e.beforeDist,e.left,e.top,e.right,e.bottom,e.delta,e.dist,e.transform);e.clientX,e.clientY;t.style.transform=n},onDragStart:w,onDragEnd:E,rotatable:!0,throttleRotate:5,onRotateStart:k,onRotate:function(e){var t=e.target,n=(e.delta,e.dist),r=e.transform;e.clientX,e.clientY;console.log("onRotate",n),t.style.transform=r},onRotateEnd:D}))},ue=n(223);function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var fe=function(e){var t=e.state,n=e.dispatch,r=Object(c.useMemo)((function(){var e=Object(X.a)(t,["items"],[]),n=Object(X.a)(t,["focus"]);return e.find((function(e){return e.id===n}))}),[t]),a=Object(c.useCallback)((function(){n(K({}))}),[n]),o=Object(c.useCallback)((function(){n(te(r.id))}),[n,r]),i=Object(c.useCallback)((function(){n(K(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r,{top:r.top+20,left:r.left+20})))}),[n,r]),l=Object(c.useCallback)((function(e){var t=e.target.name,a="name"===t?e.target.value:~~e.target.value;n(Q(Object(O.a)({id:r.id},t,a)))}),[r]);return c.createElement(ue.a,{placement:"right",closable:!1,visible:!0,mask:!1},c.createElement(F.a,{onClick:a},"add"),c.createElement("hr",null),r&&c.createElement("div",{key:r.id},c.createElement(H.a,{name:"name",defaultValue:r.name,placeholder:"name",onChange:l}),c.createElement(H.a,{name:"width",type:"number",defaultValue:r.width,placeholder:"width",onChange:l}),c.createElement(H.a,{name:"height",type:"number",defaultValue:r.height,placeholder:"height",onChange:l}),c.createElement("hr",null),c.createElement(F.a,{onClick:o},"\uc0ad\uc81c"),c.createElement(F.a,{onClick:i},"\ubcf5\uc0ac")))},me=n(127),de=n.n(me),pe=n(128),be=n.n(pe);function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je=function(e){var t=ae(e.data),n=Object(B.a)(t,2),r=n[0],a=n[1],o=(Object(c.useCallback)((function(){a(K({}))}),[a]),r.items);Object(c.useEffect)((function(){"function"===typeof e.onChange&&e.onChange(r)}),[r]);var i=Object(c.useCallback)((function(e){a(ne(e))}),[a]);return c.createElement("div",null,c.createElement("div",{style:{width:200}},c.createElement(L.a,{min:10,max:100,value:r.scale,onChange:i})),c.createElement("div",{className:de.a.root},c.createElement("div",null,c.createElement("img",{src:be.a,style:{transform:"scale(".concat(r.scale/100,")"),transformOrigin:"0 0"}}),o.map((function(e,t){return c.createElement(le,Object.assign({key:t},e,{state:he({},r),scale:r.scale/100,dispatch:a}))}))),c.createElement(fe,{state:he({},r),dispatch:a})),c.createElement("textarea",null,JSON.stringify(r,null,2)))},ge=n(132),ve=n.n(ge);function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var we=function(e){var t=e.match,n=Object(X.a)(t,["params","id"]),r=Object(s.c)((function(e){return Object(X.a)(e,["workspace","workspaces"],[]).find((function(e){return e.id===n}))})),a=Object(s.b)(),o=Object(c.useCallback)((function(){a(S(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},JSON.parse(JSON.stringify(r)),{id:void 0,name:"".concat(r.name," (\ubcf5\uc0ac)")})))}),[a,r]),i=Object(c.useCallback)((function(){a(_(n))}),[a,n]),l=Object(c.useCallback)((function(e){a(C({id:n,data:e}))}),[a,n]),f=Object(c.useCallback)((function(e){a(C({id:n,name:e.target.value}))}),[a,n]);return c.createElement("div",{className:Y()("container-fluid",ve.a.root)},c.createElement("div",{className:"row"},c.createElement("div",{className:"col"},c.createElement(u.b,{to:"/home"},"Home"),r&&c.createElement(c.Fragment,null,c.createElement(F.a,{onClick:o},"\ubcf5\uc0ac"),c.createElement(F.a,{onClick:i},"\uc0ad\uc81c"),c.createElement(H.a,{type:"text",defaultValue:r.name,onChange:f})))),c.createElement("div",{className:"row"},c.createElement("div",{className:"col"},c.createElement("hr",null),r&&c.createElement(je,{data:r.data,onChange:l}))))},Ee=n(133),ke=n.n(Ee);var De=function(e){return c.createElement("div",{className:ke.a.root},e.children)},Pe=[{path:"/home",exact:!0,component:G},{path:"/workspaces/:id",component:we}],Se="/home",Ce=[].concat(Object(y.a)(Pe.map((function(e,t){var n=e.path,r=e.exact,a=e.component;return c.createElement(U.b,{key:"route-".concat(t),path:n,exact:!!r,render:function(e){return c.createElement(a,e)}})}))),[c.createElement(U.a,{key:"redirect-to-default",to:Se})]),_e=function(){return c.createElement(De,null,c.createElement(U.d,null,Ce))},Me=function(e){var t;try{t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||m.c}catch(a){t=m.c}var n=t(),r=Object(m.d)(V,e,n);return{store:r,persistor:Object(d.b)(r)}}(),Ne=Me.store,Te=Me.persistor;var Ae=function(){return c.createElement(s.a,{store:Ne},c.createElement(f.a,{persistor:Te,loading:null},c.createElement(u.a,null,c.createElement(_e,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(Ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[138,1,2]]]);
//# sourceMappingURL=main.4ab5ddf9.chunk.js.map